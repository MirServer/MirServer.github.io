<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mir: Mir component reports</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mir
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Mir component reports </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Both the server library and the client library include facilities to provide debugging and tracing information at runtime. This is achieved through component reports, which are sets of interesting events provided by many Mir components. A component report can be usually handled in a number of different ways, configured using command-line options and/or environment variables. By default, component reports are turned off.</p>
<h2>Server reports </h2>
<p>The way component reports are handled on the server can be configured using either command-line options or environment variables. The environment variables are prefixed with <code>MIR_SERVER_</code> and contain underscores ('_') instead of dashes ('-'). The available component reports and handlers for the server are:</p>
<table class="doxtable">
<tr>
<th>Environment variable </th><th>Command line option </th><th>Handlers  </th></tr>
<tr>
<td>MIR_SERVER_CONNECTOR_REPORT </td><td>&ndash;connector-report </td><td>log,lttng </td></tr>
<tr>
<td>MIR_SERVER_COMPOSITOR_REPORT </td><td>&ndash;compositor-report </td><td>log,lttng </td></tr>
<tr>
<td>MIR_SERVER_DISPLAY_REPORT </td><td>&ndash;display-report </td><td>log,lttng </td></tr>
<tr>
<td>MIR_SERVER_INPUT_REPORT </td><td>&ndash;input-report </td><td>log,lttng </td></tr>
<tr>
<td>MIR_SERVER_LEGACY_INPUT_REPORT </td><td>&ndash;legacy-input-report </td><td>log </td></tr>
<tr>
<td>MIR_SERVER_SEAT_REPORT </td><td>&ndash;seat-report </td><td>log </td></tr>
<tr>
<td>MIR_SERVER_MSG_PROCESSOR_REPORT </td><td>&ndash;msg-processor-report </td><td>log,lttng </td></tr>
<tr>
<td>MIR_SERVER_SESSION_MEDIATOR_REPORT </td><td>&ndash;session-mediator-report </td><td>log,lttng </td></tr>
<tr>
<td>MIR_SERVER_SCENE_REPORT </td><td>&ndash;scene-report </td><td>log,lttng </td></tr>
<tr>
<td>MIR_SERVER_SHARED_LIBRARY_PROBER_REPORT </td><td>&ndash;shared-library-prober-report </td><td>log,lttng </td></tr>
</table>
<p>For example, to enable the LTTng input report, one could either use the <code>--input-report=lttng</code> command-line option to the server, or set the <code>MIR_SERVER_INPUT_REPORT=lttng</code> environment variable.</p>
<h2>Client reports </h2>
<p>Client side reports can be configured only using environment variables. The environment variables are prefixed with <code>MIR_CLIENT_</code>. The available reports and handlers for the client are:</p>
<table class="doxtable">
<tr>
<th>Environment variable </th><th>Handlers  </th></tr>
<tr>
<td>MIR_CLIENT_RPC_REPORT </td><td>log,lttng </td></tr>
<tr>
<td>MIR_CLIENT_INPUT_RECEIVER_REPORT </td><td>log,lttng </td></tr>
<tr>
<td>MIR_CLIENT_SHARED_LIBRARY_PROBER_REPORT </td><td>log,lttng </td></tr>
<tr>
<td>MIR_CLIENT_PERF_REPORT </td><td>log,lttng </td></tr>
</table>
<p>For example, to enable the logging RPC report, one should set the <code>MIR_CLIENT_RPC_REPORT=log</code> environment variable.</p>
<h2>LTTng support </h2>
<p>Mir provides LTTng tracepoints for various interesting events. You can enable LTTng tracing for a Mir component by using the corresponding command-line option or environment variable for that component's report: </p><pre class="fragment">$ lttng create mirsession -o /tmp/mirsession
$ lttng enable-event -u -a
$ lttng start
$ mir_demo_server --msg-processor-report=lttng
$ lttng stop
$ babeltrace /tmp/mirsession/&lt;trace-subdir&gt;
</pre><p>LTTng-UST versions up to and including 2.1.2, and up to and including 2.2-rc2 contain a bug (lttng #538) that prevents event recording if the tracepoint provider is dlopen()-ed at runtime, like in the case of Mir. If you have a version of LTTng affected by this bug, you need to pre-load the server tracepoint provider library: </p><pre class="fragment">$ LD_PRELOAD=libmirserverlttng.so mir_demo_server --msg-processor-report=lttng
</pre><p>The bug also affects client-side LTTng tracing, in which case you need to pre-load the client tracepoint provider library: </p><pre class="fragment">$ LD_PRELOAD=libmirclientlttng.so MIR_CLIENT_RPC_REPORT=lttng myclient</pre> </div></div><!-- contents -->
<hr>
<p align="center">Copyright &copy; 2012-2017
 Canonical Ltd. <br />
Generated on Tue 28 Nov 14:36:47 UTC 2017
</p>
</body>
</html>
