<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mir: Measuring Visual Latency</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mir
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Measuring Visual Latency </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Mir includes a utility called <code>mirvanity</code> that can use a high speed camera to measure the visual latency of your display (from client rendering to your eye).</p>
<p>It is called "mirvanity" because it works by rendering a pattern to the screen and then looking at the screen itself via the camera. In theory you could also use a laptop screen and webcam with a mirror, however laptop webcams tend to be too slow for this task. In order to use <code>mirvanity</code> you need a high speed camera supported by Linux, such as a PlayStation Eye.</p>
<h2>How to use mirvanity </h2>
<ol type="1">
<li>Start your Mir server</li>
<li>Plug in your camera</li>
<li>Position the camera on a stable surface so that it does not move during the test, and such that it is primarily looking at your display only. The camera must be centred on the display.</li>
<li>Run <code>mirvanity</code></li>
<li>Wait until the output (in the console/stdout for now) shows that the test is complete (which means enough data has been gathered).</li>
</ol>
<h2>Accuracy </h2>
<p>A common question is how accurate mirvanity's results are. An LCD monitor typically refreshes at 60Hz on an interval of about 16.6ms, and you have the added variability of the camera which even at high speed has a frame interval of about 5ms. So surely you have at least 22ms of variability?</p>
<p>Yes indeed instantaneous measurements will have wide variability that is the sum of the display and camera frame intervals. However both of these devices are very precise even though they're not in phase. So using many samples over a short period of time, <code>mirvanity</code> calculates the expected variability and compares it to the measured variability. After the expectation starts to match the measurement you have a good estimate of the baseline latency and estimated error range. <code>mirvanity</code> prints out this error and for a typical 60Hz monitor and common 187Hz PlayStation Eye camera, we observe pretty much the variability expected of around 22ms.</p>
<p>Knowing this variability is the sum of both waves, you can simply take the trough (or peak) as your measurement and thus eliminate the variability of the display and camera from the results. If you take the trough, you are excluding all display and camera latency. If you take the peak then you are including worst case display and camera latency. <code>mirvanity</code> reports all of these numbers for completeness. This is based on the <a href="https://en.wikipedia.org/wiki/Superposition_principle">Superposition Principle</a> and typically yields a stable measurement with approximately 3ms or less random variation. </p>
</div></div><!-- contents -->
<hr>
<p align="center">Copyright &copy; 2012-2017
 Canonical Ltd. <br />
Generated on Thu  9 Nov 11:54:24 UTC 2017
</p>
</body>
</html>
